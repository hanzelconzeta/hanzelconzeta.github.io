<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HANZEL | poema complejo acerca del alma</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600&family=Roboto+Slab:wght@300;400&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <style>
    :root { 
      --ultravioleta-cosmico:#0B0014; 
      --bugambilia-neon:#C13BFF; 
      --rosa-electrico:#FF2E98; 
      --naranja-volcanico:#FF4F00; 
      --verde-acido:#00FF99; 
      --turquesa-cenote:#00F0FF; 
      --dorado-luznegra:#FFD700; 
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    html, body { width:100%; overflow-x:hidden; }
    body { 
      background:var(--ultravioleta-cosmico); 
      color:var(--dorado-luznegra); 
      font-family:'Roboto Slab',serif; 
      height:100vh; 
      overflow:hidden; 
      position:relative; 
      cursor:none; 
    }

    /* Cursor, intro, guestbook y todo lo demás igual que antes... */

    .lava-container { position:absolute; inset:0; filter:url(#goo); pointer-events:none; z-index:5; }
    .blob { 
      position:absolute; width:220px; height:220px; border-radius:50%; 
      background:radial-gradient(circle at 30% 30%,var(--rosa-electrico),var(--bugambilia-neon),transparent 70%); 
      opacity:0.75; animation:lava-move 40s infinite ease-in-out alternate; 
    }
    @keyframes lava-move { 
      0%{transform:translateY(0)scale(1)rotate(0)} 
      50%{transform:translateY(-120vh)scale(2.5)rotate(90deg)} 
      100%{transform:translateY(0)scale(1)rotate(0)} 
    }

    /* Posiciones blobs desktop (sin cambios) */
    .blob:nth-child(1){left:5%;bottom:-100px;animation-duration:35s;}
    .blob:nth-child(2){left:15%;bottom:-150px;animation-duration:42s;animation-delay:5s;}
    .blob:nth-child(3){left:25%;bottom:-200px;animation-duration:38s;animation-delay:10s;}
    .blob:nth-child(4){left:35%;bottom:-120px;animation-duration:45s;animation-delay:15s;}
    .blob:nth-child(5){left:45%;bottom:-180px;animation-duration:40s;animation-delay:3s;}
    .blob:nth-child(6){left:55%;bottom:-140px;animation-duration:43s;animation-delay:8s;}
    .blob:nth-child(7){left:65%;bottom:-220px;animation-duration:37s;animation-delay:13s;}
    .blob:nth-child(8){left:75%;bottom:-160px;animation-duration:41s;animation-delay:18s;}

    /* ==================== MOBILE / TABLET (BLOBS OPTIMIZADAS) ==================== */
    @media (max-width: 768px) {
      .hanzel-logo { font-size: clamp(3.8rem, 15vw, 6rem); letter-spacing: clamp(3px, 1.5vw, 8px); }
      .intro p { font-size: clamp(1.3rem, 4.5vw, 1.6rem); }

      /* Lava por delante del texto */
      .lava-container { z-index: 15; }

      /* Blobs más pequeñas, más opacas en el centro y bordes suaves */
      .blob { 
        width: 185px; 
        height: 185px; 
        opacity: 0.92;
        background: radial-gradient(circle at 32% 32%, 
                    var(--rosa-electrico) 18%, 
                    var(--bugambilia-neon) 48%, 
                    transparent 82%);
      }

      /* Solo 8 blobs para que no se vea sucio */
      .blob:nth-child(n+9) { display: none; }

      /* Animación mucho más corta (20-22 segundos) y menos crecimiento */
      @keyframes lava-move-mobile {
        0%   { transform: translateY(0) scale(1) rotate(0); }
        50%  { transform: translateY(-85vh) scale(1.75) rotate(90deg); }
        100% { transform: translateY(0) scale(1) rotate(0); }
      }
      .blob {
        animation: lava-move-mobile 21s infinite ease-in-out alternate !important;
      }

      /* Posiciones más limpias para las 8 blobs */
      .blob:nth-child(1){left:8%;bottom:-80px;animation-duration:21s;}
      .blob:nth-child(2){left:18%;bottom:-110px;animation-duration:19s;animation-delay:3s;}
      .blob:nth-child(3){left:28%;bottom:-95px;animation-duration:23s;animation-delay:7s;}
      .blob:nth-child(4){left:42%;bottom:-120px;animation-duration:18s;animation-delay:2s;}
      .blob:nth-child(5){left:55%;bottom:-85px;animation-duration:22s;animation-delay:9s;}
      .blob:nth-child(6){left:68%;bottom:-105px;animation-duration:20s;animation-delay:5s;}
      .blob:nth-child(7){left:78%;bottom:-90px;animation-duration:19s;animation-delay:11s;}
      .blob:nth-child(8){left:88%;bottom:-115px;animation-duration:21s;animation-delay:4s;}

      .vertical-menu { bottom: 15vh; gap: 2rem; right: 6vw; }
      .vertical-menu li { font-size: 1.35rem; letter-spacing: 4px; }
      .music-player { bottom: 9vh; left: 4vw; padding: 0.6rem; }
      .music-player button { font-size: 1.8rem; }
      .est { font-size: 1rem; bottom: 4vh; }
      .chi-rho { font-size: 1.5rem; bottom: 4vh; right: 4vw; }
      .social-icons { top: 3.5vh; gap: 1.2rem; }
      .social-icons a { font-size: 1.6rem; }
      .guestbook { width: 92vw; max-width: 420px; padding: 2rem 1.8rem 1.8rem; }
      .guestbook h2 { font-size: 2.1rem; }
      .guestbook .close-btn { width: 38px; height: 38px; font-size: 1.8rem; }
    }

    /* Resto del CSS igual (guestbook, glow, float, etc.) */
    @keyframes glow { from{text-shadow:0 0 20px var(--dorado-luznegra),0 0 40px var(--bugambilia-neon)} to{text-shadow:0 0 40px var(--dorado-luznegra),0 0 80px var(--bugambilia-neon)} }
    @keyframes float { 0%,100%{transform:translateY(0)scale(1)} 50%{transform:translateY(-8px)scale(1.02)} }
  </style>
</head>
<body>
  <!-- HTML y scripts exactamente iguales que la versión anterior -->
  <div class="cursor" id="cursor"></div>
  <div class="intro">
    <div class="lava-container">
      <svg style="display:none;"><filter id="goo"><feGaussianBlur in="SourceGraphic" stdDeviation="30" result="blur"/><feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 19 -9" result="goo"/><feComposite in="SourceGraphic" in2="goo" operator="atop"/></filter></svg>
      <div class="blob"></div><div class="blob"></div><div class="blob"></div><div class="blob"></div>
      <div class="blob"></div><div class="blob"></div><div class="blob"></div><div class="blob"></div>
      <!-- solo hasta 8 blobs -->
    </div>
    <h1 class="hanzel-logo">HANZEL</h1>
    <p>RESTABLECIENDO EL CANON</p>
    <ul class="vertical-menu"><li id="guestbook-link">guestbook</li></ul>
    <div class="est">EST. 2006</div>
  </div>
  <div class="chi-rho">☧</div>
  <div class="music-player">
    <span class="song-title" id="song-title">montaña rusa</span>
    <div class="buttons">
      <button id="prev-btn">⏮</button>
      <button id="play-pause-btn">▶</button>
      <button id="next-btn">⏭</button>
    </div>
    <audio id="audio-player"></audio>
  </div>
  <div class="guestbook" id="guestbook">
    <button class="close-btn" id="close-guestbook">×</button>
    <h2>Guestbook</h2>
    <form id="guestbook-form">
      <input type="text" id="name" placeholder="Tu nombre" maxlength="50" required>
      <textarea id="message" placeholder="Deja tu mensaje..." maxlength="500" required></textarea>
      <button type="submit">Firmar el libro</button>
    </form>
    <div class="comments" id="comments-list"></div>
  </div>
  <div class="social-icons">
    <a href="https://www.youtube.com/hanzelconzeta" target="_blank"><i class="fab fa-youtube"></i></a>
    <a href="https://instagram.com/hanzelconzeta" target="_blank"><i class="fab fa-instagram"></i></a>
    <a href="https://open.spotify.com/artist/5kKnbqecf3TSRljleQdkV9" target="_blank"><i class="fab fa-spotify"></i></a>
    <a href="https://www.facebook.com/hanzelconzeta" target="_blank"><i class="fab fa-facebook"></i></a>
    <a href="https://x.com/hanzelconzeta" target="_blank"><i class="fa-brands fa-x-twitter"></i></a>
    <a href="https://www.tiktok.com/@hanzelconzeta" target="_blank"><i class="fab fa-tiktok"></i></a>
  </div>

  <!-- Scripts exactamente iguales -->
  <script>
    /* Cursor + logo (sin cambios) */
    const cursor = document.getElementById('cursor');
    document.addEventListener('mousemove', e => {
      cursor.style.left = e.clientX + 'px';
      cursor.style.top = e.clientY + 'px';
      const trail = document.createElement('div');
      trail.className = 'cursor-trail';
      trail.style.left = e.clientX + 'px';
      trail.style.top = e.clientY + 'px';
      trail.style.background = `radial-gradient(circle, ${['#C13BFF','#FF2E98','#FF4F00','#00FF99','#00F0FF'][Math.floor(Math.random()*5)]}, transparent)`;
      document.body.appendChild(trail);
      setTimeout(() => trail.remove(), 1000);
    });
    document.querySelectorAll('button, li, a').forEach(el => {
      el.addEventListener('mouseenter', () => cursor.classList.add('hover'));
      el.addEventListener('mouseleave', () => cursor.classList.remove('hover'));
    });
    document.addEventListener('mousedown', () => cursor.classList.add('click'));
    document.addEventListener('mouseup', () => cursor.classList.remove('click'));

    const logo = document.querySelector('.hanzel-logo');
    const text = logo.textContent;
    logo.innerHTML = '';
    const durations = [5,6,4.5,5.5,4,6];
    const delays = [0,0.1,0.2,0.05,0.15,0.25];
    text.split('').forEach((char,i) => {
      const span = document.createElement('span');
      span.textContent = char;
      span.style.setProperty('--duration', `${durations[i]}s`);
      span.style.setProperty('--delay', `${delays[i]}s`);
      logo.appendChild(span);
    });
  </script>

  <script type="module">
    /* Firebase, música y guestbook sin cambios */
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs, query, orderBy, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-firestore.js";
    
    const firebaseConfig = {
      apiKey: "AIzaSyD84RLER1Z0z3YX0XnBvFEu0WLIw3frGro",
      authDomain: "hanzelconzeta-bd17b.firebaseapp.com",
      projectId: "hanzelconzeta-bd17b",
      storageBucket: "hanzelconzeta-bd17b.firebasestorage.app",
      messagingSenderId: "855182658974",
      appId: "1:855182658974:web:7dede44a589105053c1a8f"
    };
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const songs = [
      { title: 'montaña rusa', src: 'montana_rusa.mp3' },
      { title: 'que dificil seria verte partir', src: 'que_dificil_seria_verte_partir.mp3' },
      { title: 'te entrego hoy', src: 'te_entrego_hoy.mp3' },
      { title: 'sin identidad', src: 'sin_identidad.mp3' },
      { title: 'me hiciste creer', src: 'me_hiciste_creer.mp3' }
    ];
    let currentSongIndex = 0;
    const audio = document.getElementById('audio-player');
    const playPauseBtn = document.getElementById('play-pause-btn');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');
    const songTitle = document.getElementById('song-title');

    function loadSong(i) {
      currentSongIndex = i;
      audio.src = songs[i].src;
      songTitle.textContent = songs[i].title;
      audio.load();
      playPauseBtn.textContent = '▶';
    }
    playPauseBtn.addEventListener('click', () => {
      if (audio.paused) { audio.play(); playPauseBtn.textContent = '❚❚'; }
      else { audio.pause(); playPauseBtn.textContent = '▶'; }
    });
    prevBtn.addEventListener('click', () => loadSong((currentSongIndex - 1 + songs.length) % songs.length));
    nextBtn.addEventListener('click', () => loadSong((currentSongIndex + 1) % songs.length));
    audio.addEventListener('ended', () => nextBtn.click());
    loadSong(0);

    const guestbook = document.getElementById('guestbook');
    document.getElementById('guestbook-link').addEventListener('click', () => { guestbook.classList.add('active'); loadComments(); });
    document.getElementById('close-guestbook').addEventListener('click', () => guestbook.classList.remove('active'));
    document.addEventListener('click', e => {
      if (guestbook.classList.contains('active') && !guestbook.contains(e.target) && e.target.id !== 'guestbook-link') guestbook.classList.remove('active');
    });

    document.getElementById('guestbook-form').addEventListener('submit', async e => {
      e.preventDefault();
      const name = document.getElementById('name').value.trim();
      const message = document.getElementById('message').value.trim();
      if (!name || !message) return;
      try {
        await addDoc(collection(db, 'comments'), { name, message, timestamp: serverTimestamp() });
        alert('¡Gracias por firmar el guestbook!');
        document.getElementById('guestbook-form').reset();
        loadComments();
      } catch(err) { alert('Error al enviar'); }
    });

    async function loadComments() {
      const list = document.getElementById('comments-list');
      list.innerHTML = '<p style="text-align:center;opacity:0.6;">Cargando...</p>';
      const q = query(collection(db, 'comments'), orderBy('timestamp', 'desc'));
      const snapshot = await getDocs(q);
      list.innerHTML = '';
      snapshot.forEach(doc => {
        const d = doc.data();
        const date = d.timestamp ? d.timestamp.toDate().toLocaleDateString('es-MX') : '';
        const div = document.createElement('div');
        div.className = 'comment';
        div.innerHTML = `<span class="author">${d.name}</span><p>${d.message}</p><span class="date">${date}</span>`;
        list.appendChild(div);
      });
      if (snapshot.empty) list.innerHTML = '<p style="text-align:center;opacity:0.6;">Sé el primero ✨</p>';
    }
  </script>
</body>
</html>
